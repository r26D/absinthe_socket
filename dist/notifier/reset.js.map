{"version":3,"file":"reset.js","sources":["../../src/notifier/observer/notifyAll.js","../../src/notifier/notifyCanceled.js","../../src/notifier/event/eventNames.js","../../src/notifier/event/eventCreators.js","../../src/notifier/flushCanceled.js","../../src/notifier/requestStatuses.js","../../src/notifier/reset.js"],"sourcesContent":["// @flow\n\nimport type {Event, Observer} from \"../types\";\n\nconst getNotifier = (handlerName, payload) => observer =>\n  observer[handlerName] && observer[handlerName](payload);\n\nconst getHandlerName = ({name}) => `on${name}`;\n\nconst notifyAll = <Result, Variables: void | Object>(\n  observers: $ReadOnlyArray<Observer<Result, Variables>>,\n  event: Event\n) => observers.forEach(getNotifier(getHandlerName(event), event.payload));\n\nexport default notifyAll;\n","// @flow\n\nimport observerNotifyAll from \"./observer/notifyAll\";\n\nimport type {Event, Notifier} from \"./types\";\n\nconst notifyCanceled = <Result, Variables: void | Object>(\n  notifier: Notifier<Result, Variables>,\n  event: Event\n) => {\n  observerNotifyAll(notifier.canceledObservers, event);\n\n  return notifier;\n};\n\nexport default notifyCanceled;\n","// @flow\n\nconst eventNames = {\n  abort: (\"Abort\": \"Abort\"),\n  cancel: (\"Cancel\": \"Cancel\"),\n  error: (\"Error\": \"Error\"),\n  result: (\"Result\": \"Result\"),\n  start: (\"Start\": \"Start\")\n};\n\ntype EventName = $Values<typeof eventNames>;\n\nexport default eventNames;\n\nexport type {EventName};\n","// @flow\n\nimport eventNames from \"./eventNames\";\n\nimport type {\n  AbortEvent,\n  CancelEvent,\n  ErrorEvent,\n  Notifier,\n  ResultEvent,\n  StartEvent\n} from \"../types\";\n\nconst createStartEvent = <Payload: Notifier<any, any>>(\n  payload: Payload\n): StartEvent<Payload> => ({payload, name: eventNames.start});\n\nconst createResultEvent = <Result>(payload: Result): ResultEvent<Result> => ({\n  payload,\n  name: eventNames.result\n});\n\nconst createErrorEvent = (payload: Error): ErrorEvent => ({\n  payload,\n  name: eventNames.error\n});\n\nconst createCancelEvent = (): CancelEvent => ({\n  name: eventNames.cancel,\n  payload: undefined\n});\n\nconst createAbortEvent = (payload: Error): AbortEvent => ({\n  payload,\n  name: eventNames.abort\n});\n\nexport {\n  createStartEvent,\n  createResultEvent,\n  createErrorEvent,\n  createCancelEvent,\n  createAbortEvent\n};\n","// @flow\n\nimport notifyCanceled from \"./notifyCanceled\";\nimport {createCancelEvent} from \"./event/eventCreators\";\n\nimport type {Notifier} from \"./types\";\n\nconst clearCanceled = notifier => ({\n  ...notifier,\n  canceledObservers: []\n});\n\nconst flushCanceled = <Result: any, Variables: void | Object>(\n  notifier: Notifier<Result, Variables>\n) =>\n  notifier.canceledObservers.length > 0\n    ? clearCanceled(notifyCanceled(notifier, createCancelEvent()))\n    : notifier;\n\nexport default flushCanceled;\n","// @flow\n\nconst requestStatuses = {\n  canceled: (\"canceled\": \"canceled\"),\n  canceling: (\"canceling\": \"canceling\"),\n  pending: (\"pending\": \"pending\"),\n  sent: (\"sent\": \"sent\"),\n  sending: (\"sending\": \"sending\")\n};\n\ntype RequestStatus = $Values<typeof requestStatuses>;\n\nexport default requestStatuses;\n\nexport type {RequestStatus};\n","// @flow\n\nimport flushCanceled from \"./flushCanceled\";\nimport requestStatuses from \"./requestStatuses\";\n\nimport type {Notifier} from \"./types\";\n\nconst reset = <Result, Variables: void | Object>(\n  notifier: Notifier<Result, Variables>\n) =>\n  flushCanceled({\n    ...notifier,\n    isActive: true,\n    requestStatus: requestStatuses.pending,\n    subscriptionId: undefined\n  });\n\nexport default reset;\n"],"names":["getNotifier","handlerName","payload","observer","getHandlerName","name","notifyAll","observers","event","forEach","notifyCanceled","notifier","observerNotifyAll","canceledObservers","eventNames","abort","cancel","error","result","start","createStartEvent","createResultEvent","createErrorEvent","createCancelEvent","undefined","createAbortEvent","clearCanceled","flushCanceled","length","requestStatuses","canceled","canceling","pending","sent","sending","reset","isActive","requestStatus","subscriptionId"],"mappings":"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"}